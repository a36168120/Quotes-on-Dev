!function(o){o(function(){let e="";o("#new-quote-button").on("click",function(t){t.preventDefault(),e=document.URL,o.ajax({method:"get",url:api_vars.rest_url+"wp/v2/posts?filter[orderby]=rand&filter[posts_per_page]=1"}).done(function(o){const e=o[0];console.log(e),history.pushState(null,null,e.slug)}).fail(function(){}),o(window).on("popstate",function(){window.location.replace(e)})}),o("#quote-submission-form").on("submit",function(e){e.preventDefault(),console.log("form submitted");const t=o("#quote-author").val(),n=o("#quote-content").val(),u=o("#quote-source").val(),s=o("quote-source-url").val();""!==t&&""!==n?o.ajax({method:"post",url:api_vars.rest_url+"wp/v2/posts",data:{title:t,content:n,post_status:"pending",_qod_quote_source:u,_qod_quote_source_url:s},beforeSend:function(o){o.setRequestHeader("X-WP-Nonce",api_vars.nonce)}}).done(function(){console.log("quote submit success"),o("#quote-submission-form").slideUp(2e3)}).fail(function(){console.log("quote submit fail")}):""==t?alert("Please fill in name for author!"):""==n?alert("Please fill in quote content"):console.log("no input")})})}(jQuery);